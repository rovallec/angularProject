<table width=90% style="margin-left: 5%;margin-top:50px">
    <tr>
        <td width=20%>
            <img width=200 style="margin-left:5%"
                src="https://iisy.fi/wp-content/uploads/2018/08/user-profile-male-logo.jpg" height="200px">
        </td>
        <td>
            <div class="form-group col-md-12">
                <div class="form-row">
                    <div class="form-group col-md-8">
                        <label for="txt_name">Name:</label>
                        <input type="text" class="form-control" [disabled]="true" [(ngModel)]="employee.name">
                    </div>
                    <div class="form-group col-md-2">
                        <label>Account:</label>
                        <input type="text" class="form-control" [disabled]='true' [(ngModel)]='employee.account'>
                    </div>
                    <div class="form-group col-md-2">
                        <label>Supervisor:</label>
                        <input type="text" class="form-control" [disabled]='true' [(ngModel)]="employee.user_name">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group col-md-3">
                        <label>Joining Date:</label>
                        <input type="date" class="form-control" [disabled]="true" [(ngModel)]="employee.hiring_date" datetime="dd-MM-yyyy">
                    </div>
                    <div class="form-group col-md-3">
                        <label>Client ID:</label>
                        <input type="text" class="form-control" [disabled]="true" [(ngModel)]="employee.client_id">
                    </div>
                    <div class="form-group col-md-3">
                        <label>Nearsol ID:</label>
                        <input type="text" class="form-control" [disabled]="true" [(ngModel)]="employee.nearsol_id">
                    </div>
                    <div class="form-group col-md-3">
                        <label>Base Payment:</label>
                        <input type="text" class="form-control" [disabled]="true" [(ngModel)]="totalPayment">
                    </div>
                </div>
            </div>
        </td>
    </tr>
    <!------------------------------------------------------------------------------------NAV------------------------------------------------------------------------->
    <tr style="border-bottom: solid 4px #e3f2fd;">
        <td colspan="2" style="padding-top:30px" *ngIf="!newProc">
            <nav width=100% style="border-top: 4px solid #e3f2fd;">
                <div class="nav nav-tabs" id="nav-tab" role="tablist" width=100% style="padding-top:15px">
                    <a class="nav-item nav-link active" id="nav-attendence-tab" data-toggle="tab" href="#nav-attendence"
                        role="tab" aria-controls="nav-attendence" aria-selected="true">Payments</a>
                    <a class="nav-item nav-link" id="nav-leavs-tab" data-toggle="tab" href="#nav-leavs" role="tab"
                        aria-controls="nav-leavs" aria-selected="false">Payment Methods</a>
                    <a class="nav-item nav-link" id="nav-adv-tab" data-toggle="tab" href="#nav-adv" role="tab"
                        aria-controls="nav-adv" aria-selected="false">Salary Advance</a>
                    <a class="nav-item nav-link" id="nav-term-tab" data-toggle="tab" href="#nav-term" role="tab"
                        aria-controls="nav-term" aria-selected="false" *ngIf="employee.active === '0'">Termination</a>
                    <a class="nav-item nav-link" id="nav-services-tab" data-toggle="tab" href="#nav-services" role="tab"
                        aria-controls="nav-services" aria-selected="false">Services</a>
                </div>
            </nav>

            <div class="tab-content" id="nav-tabContent">
                <div class="tab-pane fade show" id="nav-adv" role="tabpanel" aria-labelledby="nav-adv-tab">
                    <div class="row col-sm-12">
                        <div class="col-sm-2"></div>
                        <div class="col-sm-3">
                            <label>Bono 14</label>
                            <input type="text" [(ngModel)]="acumulated_b14" class="form-control" disabled="true">
                        </div>
                        <div class="col-sm-2"></div>
                        <div class="col-sm-3">
                            <label>Aguinaldo</label>
                            <input type="text" [(ngModel)]="acumulated_ag" class="form-control" disabled="true">
                        </div>
                        <div class="col-sm-2"></div>
                    </div>
                    <div class="form-row col-sm-12" style="margin-top: 10px;">
                        <table class="table table-striped">
                            <thead>
                                <th style="text-align: center; vertical-align: middle;">REQUESTER</th>
                                <th style="text-align: center; vertical-align: middle;">TYPE</th>
                                <th style="text-align: center; vertical-align: middle;">AMOUNT</th>
                                <th style="text-align: center; vertical-align: middle;">ACTION</th>
                                <th style="text-align: center; vertical-align: middle;">STATUS</th>
                            </thead>
                            <tbody>
                                <tr *ngFor="let adv of advances">
                                    <td style="text-align: center; vertical-align: middle;">{{adv.user_name}}</td>
                                    <td style="text-align: center; vertical-align: middle;">{{adv.type}}</td>
                                    <td style="text-align: center; vertical-align: middle;">{{adv.amount}}</td>
                                    <td style="padding: 0px; margin: 0px; text-align: center; vertical-align: middle;">
                                        <button type="button" class="btn btn-outline-secondary"
                                            style="height: 1.5em; padding-top: 0rem;" data-toggle="modal"
                                            data-target="#advanceModal" (click)="assignAdvance(adv)"
                                            data-placement="top" title="Aprovee or Dismiss"
                                            [disabled]="adv.status!='PENDING'">
                                            <i class="fas fa-exchange-alt"></i>
                                        </button>
                                    </td>
                                    <td style="text-align: center; vertical-align: middle;">{{adv.status}}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="tab-pane fade show active" id="nav-attendence" role="tabpanel"
                    aria-labelledby="nav-attendence-tab">
                    <div class="form-row col-md-12" style="margin-top:25px; margin-bottom: 25px;">
                        <div class="col-md-3">
                            <div class="row col-md-12">
                                <label>Year:</label>
                                <select class="form-control selectable" [(ngModel)]="selectedYear">
                                    <option *ngFor="let year of years">{{year}}</option>
                                </select>
                            </div>
                            <div class="row col-md-12">
                                <label>Month:</label>
                                <select class="form-control selectable" [(ngModel)]="selectedMonth"
                                    (change)="setMonth()">
                                    <option *ngFor="let month of months">{{month}}</option>
                                </select>
                            </div>
                            <div class="row col-md-12" style="margin-top:10px">
                                <label>Period:</label>
                                <div class="list-group w-100" id="list-tab" role="tablist">
                                    <a class="list-group-item list-group-item-action w-100 selectable"
                                        (click)="clickSetPayment(pys)"
                                        [ngClass]="{'active': active_payment.idpayments == pys.idpayments}"
                                        *ngFor="let pys of showPayments()">{{pys.start}} TO {{pys.end}}</a>
                                </div>
                            </div>
                            <div class="row col-md-12 d-flex justify-content-between" style="margin-top:25px">
                                <div>
                                    <button class="form-control btn btn-outline-danger" data-toggle="modal" data-target="#deletePayment"><i class="far fa-trash-alt"></i></button>
                                </div>
                                <div>
                                    <button class="form-control btn btn-outline-warning" (click)="acreditSelection()" [disabled]="acreditType === '0'"><i class="fas fa-credit-card"></i></button>
                                </div>
                                <div>
                                    <button class="form-control btn btn-outline-success" data-toggle="modal" data-target="#addPayment" (click)="setNewPayment()"><i class="fas fa-plus"></i></button>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-9">
                            <div class="row col-md-12">
                                <div class="form-group col-md-4">
                                    <label>Account:</label>
                                    <input type="text" [(ngModel)]="activeAccountpy" class="form-control" disabled="true">
                                </div>
                                <div class="form-group col-md-4">
                                </div>
                                <div class="form-group col-md-4">
                                    <label>Payment Method:</label>
                                    <input type="text" [(ngModel)]="activePaymentMethodpy" class="form-control" disabled="true">
                                </div>
                            </div>
                            <div class="row col-md-12 margin-top:25px">
                                <div class="col-md-6 right-border-middle">
                                    <div class="row col-md-12 d-flex justify-content-center">
                                        <label style="font-weight: bolder; font-size: 16px;">CREDITS</label>
                                    </div>
                                    <div class="row col-md-12 d-flex justify-content-center">
                                        <table class="table table-light table-hover selectable" style="width: 100%;">
                                            <thead>
                                                <th>STATUS</th>
                                                <th>ID</th>
                                                <th>CONCEPT</th>
                                                <th>AMOUNT</th>
                                            </thead>
                                            <tbody>
                                                <tr *ngFor="let cred of credits" [ngClass]="{'table-warning':(cred.status === 'ACREDIT' || cred.status === 'PAID')}">
                                                    <td style="text-align: center;"><input type="checkbox" [value]="cred.iddebits"
                                                        [checked]="cred.status === 'PAID' || cred.status === 'ACREDIT'" (change)="selectedCredit($event, 'credits')"
                                                        [disabled]="acreditType === 'debits' || cred.status === 'ACREDIT' || cred.status === 'PAID'"></td>
                                                    <td (click)="setCredit(cred)" data-target="#deduction_view"
                                                    data-toggle="modal">{{cred.iddebits}}</td>
                                                    <td (click)="setCredit(cred)" data-target="#deduction_view"
                                                    data-toggle="modal">{{cred.type}}</td>
                                                    <td (click)="setCredit(cred)" data-target="#deduction_view"
                                                    data-toggle="modal">{{cred.amount}}</td>
                                                </tr>
                                                <tr>
                                                    <td colspan="4" style="text-align:center;" class="hover-blue" (click)="newDeduction('Credit')" data-target="#deduction_view"
                                                    data-toggle="modal"><i class="fas fa-plus"></i></td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="row col-md-12 d-flex justify-content-center">
                                        <label style="font-weight: bolder; font-size: 16px;">DEBITS</label>
                                    </div>
                                    <div class="row col-md-12 d-flex justify-content-center">
                                        <table class="table table-light table-hover selectable" style="width: 100%;">
                                            <thead>
                                                <th>STATUS</th>
                                                <th>ID</th>
                                                <th>CONCEPT</th>
                                                <th>AMOUNT</th>
                                            </thead>
                                            <tbody>
                                                <tr *ngFor="let deb of debits" [ngClass]="{'table-warning':(deb.status === 'ACREDIT' || deb.status === 'PAID')}">
                                                    <td style="text-align: center;"><input type="checkbox" [value]="deb.iddebits"
                                                        [checked]="deb.status === 'PAID' || deb.status === 'ACREDIT'" (change)="selectedDebit($event, 'debits')"
                                                        [disabled]="acreditType === 'credits' || deb.status === 'ACREDIT' || deb.status === 'PAID'"></td>
                                                    <td (click)="setDeduction(deb)" data-target="#deduction_view"
                                                    data-toggle="modal">{{deb.iddebits}}</td>
                                                    <td (click)="setDeduction(deb)" data-target="#deduction_view"
                                                    data-toggle="modal">{{deb.type}}</td>
                                                    <td (click)="setDeduction(deb)" data-target="#deduction_view"
                                                    data-toggle="modal">{{deb.amount}}</td>
                                                </tr>
                                                <tr>
                                                    <td colspan="4" style="text-align:center;" class="hover-blue" (click)="newDeduction('Debit')" data-target="#deduction_view"
                                                    data-toggle="modal"><i class="fas fa-plus"></i></td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="tab-pane fade" id="nav-leavs" role="tabpanel" aria-labelledby="nav-leavs-tab">
                    <div class="form-row col-sm-12" style="margin-bottom:25px">
                        <label style="font-size: 20px; font-weight: bold; margin-left:42.5%;margin-top: 10px;">
                          PAYMENT METHODS
                        </label>
                        <div class="form-row col-md-12">
                            <div class="form-group col-md-1"></div>
                            <div class="form-group col-md-10">
                                <table class="table table-striped table-hover">
                                    <thead>
                                        <th style="text-align: center;">TYPE</th>
                                        <th style="text-align: center;">NUMBER</th>
                                        <th style="text-align: center;">BANK</th>
                                        <th style="text-align: center;">ACTIVE</th>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let paymentMethod of paymentMethods"
                                            (click)="setPaymentMethod(paymentMethod)">
                                            <td style="text-align: center;">{{paymentMethod.type}}</td>
                                            <td style="text-align: center;">{{paymentMethod.number}}</td>
                                            <td style="text-align: center;">{{paymentMethod.bank}}</td>
                                            <td style="text-align: center;">{{paymentMethod.predeterm}}</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div class="form-group col-md-1"></div>
                        </div>
                        <div class="form-row col-md-12">
                            <div class="form-group col-md-1"></div>
                            <div class="form-group col-md-10" style="border-bottom:solid 3px #e3f2fd;"></div>
                            <div class="form-group col-md-1"></div>
                        </div>
                        <div class="form-row col-md-12" *ngIf="newPaymentMethod || recordPaymentMethod"
                            style="margin-top:25px">
                            <label style="font-size: 20px; font-weight: bold; margin-left:42%;margin-top: 10px;">
                                NEW PAYMENT METHOD
                            </label>
                            <div class="form-row col-md-12">
                                <div class="form-group col-md-1"></div>
                                <div class="form-group col-md-3">
                                    <label>Type:</label>
                                    <select class="form-control" [(ngModel)]="activePaymentMethod.type"
                                        [disabled]="recordPaymentMethod">
                                        <option>BANK ACCOUNT</option>
                                        <option>BANK CHECK</option>
                                        <option>WALLET ACCOUNT</option>
                                    </select>
                                </div>
                                <div class="form-group col-md-4">
                                    <label>Bank:</label>
                                    <input type="text" class="form-control"
                                        [disabled]="activePaymentMethod.type != 'BANK ACCOUNT' || recordPaymentMethod"
                                        [(ngModel)]="activePaymentMethod.bank">
                                </div>
                                <div class="form-group col-md-4">
                                    <label>Account:</label>
                                    <input type="text" class="form-control"
                                        [disabled]="activePaymentMethod.type != 'BANK ACCOUNT' || recordPaymentMethod"
                                        [(ngModel)]="activePaymentMethod.number">
                                </div>
                                <div class="form-group col-md-1"></div>
                            </div>
                            <div class="form-row col-md-12" *ngIf="newPaymentMethod || recordPaymentMethod">
                                <div class="form-group col-md-1"></div>
                                <div class="form-group col-md-10">
                                  <label style="text-align: center;">Notes:</label>
                                  <textarea class="form-control" width="100%" [(ngModel)]="activePaymentMethod.notes"
                                      [disabled]="recordPaymentMethod"></textarea>
                                </div>
                                <div class="form-group col-md-1"></div>
                            </div>
                            <div class="form-row col-md-12" *ngIf="newPaymentMethod || recordPaymentMethod"
                                style="margin-bottom:25px">
                                <div class="form-group col-md-1"></div>
                                <div class="form-group col-md-3">
                                    <label style="text-align: center;">User:</label>
                                    <input type="text" [disabled]="true" class="form-control"
                                        [(ngModel)]="activePaymentMethod.id_user">
                                </div>
                                <div class="form-group col-md-4"></div>
                                <div class="form-group col-md-3">
                                    <label style="text-align: center;">Date:</label>
                                    <input type="date" [disabled]="true" class="form-control"
                                        [(ngModel)]="activePaymentMethod.date" datetime="dd-MM-yyyy">
                                </div>
                                <div class="form-group col-md-1"></div>
                            </div>
                        </div>
                        <div class="form-row col-md-12" *ngIf="newPaymentMethod">
                            <div class="form-group col-md-2"></div>
                            <div class="form-group col-md-8" style="border-bottom:solid 3px #e3f2fd;"></div>
                            <div class="form-group col-md-2"></div>
                        </div>
                        <div class="form-row col-md-12" *ngIf="newPaymentMethod" style="margin-top:25px">
                            <div class="from-group col-md-1"></div>
                            <div class="from-group col-md-2">
                                <button class="form-control" (click)="cancelNewpaymentMethod()">Cancel</button>
                            </div>
                            <div class="from-group col-md-6"></div>
                            <div class="from-group col-md-2">
                                <button class="form-control" (click)="insertNewPaymentMethod()">Accept</button>
                            </div>
                            <div class="from-group col-md-1"></div>
                        </div>
                        <div class="form-row col-md-12" *ngIf="!newPaymentMethod" style="margin-top:25px">
                            <div class="from-group col-md-5"></div>
                            <div class="from-group col-md-2">
                                <button class="form-control" (click)="setNewpaymentMethod()">New</button>
                            </div>
                            <div class="from-group col-md-5"></div>
                        </div>
                    </div>
                </div>

                <div class="tab-pane fade" id="nav-term" role="tabpanel" aria-labelledby="nav-term-tab">
                    <div class="row col-md-12" style="margin-top:20px">
                        <div class="col-md-6">
                            <table class="table table_ancho" style="width: 100%;text-align:center">
                                <thead>
                                    <th>DESCRIPTION</th>
                                    <th>AMOUNT</th>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let cred of cred_benefits" (click)="setSelectedDetail(cred)"
                                        data-toggle="modal" data-target="#calc_detail">
                                        <td class="ancho">{{cred.type}}</td>
                                        <td>{{cred.amount}}</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="col-md-6">
                            <table class="table table_ancho" style="width: 100%;text-align:center">
                                <thead>
                                    <th>DESCRIPTION</th>
                                    <th>AMOUNT</th>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let deb of deb_benefits">
                                        <td class="ancho">{{deb.type}}</td>
                                        <td>{{deb.amount}}</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="row col-md-12" style="margin-top:20px">
                        <div class="col-md-12">
                            <table class="table table-striped table-hover table_ancho"
                                style="width: 100%; text-align:center">
                                <tbody>
                                    <tr>
                                        <td class="font-weight-bold text-right">
                                            <h5>Total</h5>
                                        </td>
                                        <td class="font-weight-bold text-right px-2">
                                            <h5>
                                                {{ total | number: '3.1-2' }}
                                            </h5>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="row col-md-12" style="margin-bottom: 15px;">
                        <div class="col-md-10">
                        </div>
                        <div class="col-md-2">
                            <button class="form-control" (click)="acreditPayment()"
                                *ngIf="this.process.status=='CLOSED'">Accredit</button>
                            <button class="form-control" (click)="completePayment()"
                                *ngIf="this.process.status=='ACREDIT'">Pay</button>
                            <button class="form-control" (click)="printSettlement()"
                                *ngIf="this.process.status=='PAID'">Print</button>
                        </div>
                    </div>
                </div>

                <div class="tab-pane fade" id="nav-services" role="tabpanel" aria-labelledby="nav-services-tab">
                    <div class="form-row col-sm-12" style="margin-bottom:25px">
                        <label style="font-size: 20px; font-weight: bold; margin-left:42.5%;margin-top: 10px;">SERVICES</label>
                        <div class="row col-md-12">
                            <div class="col-md-2"></div>
                            <div class="col-md-8">
                                <table class="table table-light table-hover">
                                    <thead>
                                        <th>ID</th>
                                        <th>TYPE</th>
                                        <th>AMOUNT</th>
                                        <th>MAX</th>
                                        <th>CURRENT</th>
                                        <th>FRECUENCY</th>
                                        <th>STATUS</th>
                                    </thead>
                                    <tbody>
                                        <tr class="selectable" *ngFor="let service of services"
                                        [ngClass]="{'table-danger':service.status == '0','table-success':service.status == '1'}"
                                        (mousedown)="getService(service)" data-target="#servicesView"
                                        data-toggle="modal" style="user-select: none; -moz-user-select: none; -khtml-user-select: none; text-align: center;">
                                            <td>{{service.idservices}}</td>
                                            <td>{{service.name}}</td>
                                            <td>{{service.amount}}</td>
                                            <td>{{service.max}}</td>
                                            <td>{{service.current}}</td>
                                            <td>{{service.frecuency}}</td>
                                            <td *ngIf="service.status == '1'">ACTIVE</td><td *ngIf="service.status == '0'">INACTIVE</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div class="col-md-2"></div>
                        </div>
                        <div class="col-md-2"></div>
                        <div class="row col-md-8">
                            <div class="d-flex justify-content-end w-100">
                                <div class="d-flex justify-content-between">
                                    <button class="btn btn-outline-success" style="margin-left:10px" (mousedown)="setService()"  data-target="#servicesView"
                                    data-toggle="modal"><i class="fas fa-plus"></i></button>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-2"></div>
                    </div>
                </div>
            </div>
        </td>
        <!---------------------------------------------------------------------------------NEW PROCESS----------------------------------------------------------------------->
        <td colspan="2" style="padding-top:30px">
            <nav width=100% style="border-top: 4px solid #e3f2fd;">
                <div class="nav nav-tabs" id="nav-tb" role="tablist" width=100% style="padding-top:15px"
                    *ngIf="newProc">
                    <a class="nav-item nav-link active" id="nav-newproc-tab" data-toggle="tab" href="#nav-newproc"
                        role="tab" aria-controls="nav-newproc" aria-selected="true"><i
                            class="fas fa-arrow-circle-left"></i></a>
                </div>
            </nav>
            <div class="tab-content" id="nav-tabContent">
                <div class="tab-pane fade show active" id="nav-newproc" role="tabpanel"
                    aria-labelledby="nav-newproc-tab">
                </div>
            </div>
        </td>
    </tr>
    <!---------------------------------------------------------------------------------RECORD---------------------------------------------------------------------------->
    <tr>
        <td colspan="2" style="padding-top:20px">

            <table width="100%">
                <tr width="100%">
                    <td
                        style="padding:6px; background-color:rgb(227, 239, 255); border-style:solid; border-width: 1px; border-color:rgb(173, 199, 255); height: 15px;">
                        <b>New Action</b><i class="fas fa-arrow-circle-left" style="margin-left: 90%"></i>
                </tr>
                <tr>
                    <td
                        style="padding:15px; background-color:rgb(239, 246, 255);border-color:rgb(187, 208, 255);border-style: solid; border-width: 1px">
                        <table class="table table-striped table-hover selectable"
                            style="text-align: center; margin-top:20px" width=100%>
                            <thead>
                                <th>ID</th>
                                <th>NAME</th>
                                <th>DESCRIPTION</th>
                            </thead>
                            <tbody>
                            </tbody>
                        </table>
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>

<!-- Modal -->
<div class="modal fade" id="advanceModal" tabindex="-1" role="dialog" aria-labelledby="advanceModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="advanceModalLabel">Approve or Dismiss Advance</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <label>
                    Amount:
                </label>
                <input type="text" [(ngModel)]="adv.amount" class="form-control w250">
                <label>
                    Insert reason to approve or dismiss:
                </label>
                <input type="text" [(ngModel)]="adv.notes" class="form-control w250">
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline-secondary" (click)="cancelPayments(adv)"
                    [disabled]="adv.status == 'CLOSED' || adv.status == 'PAID' || adv.status == 'REJECTED' || adv.notes == ''"
                    data-dismiss="modal">
                    DISMISS
                </button>
                <button type="button" class="btn btn-outline-secondary" (click)="setPayments(adv)"
                    [disabled]="adv.status == 'CLOSED' || adv.status == 'PAID' || adv.status == 'REJECTED' || adv.notes == ''"
                    data-dismiss="modal">
                    APPROVE
                </button>
            </div>
        </div>
    </div>
</div>
<!----------------------------------------------------------------------------------------------CALC DETAIL MODAL--------------------------------------------------------------->
<div class="modal fade" id="calc_detail" tabindex="-1" role="dialog" aria-labelledby="calc_detail" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="search_modalLabel"
                    style="font-weight:bold; text-align: center; font-size: 18px;">{{selected_detail.type}}</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="row">
                <div class="modal-body d-flex justify-content-between">
                    <div style="width: 90%; margin-left: 5%;" class="row d-flex flex-column">
                        <div [ngClass]="{'blue-hover':hover==='1'}" (mouseenter)="setHover('2')">
                            <p style="font-size: 16px; font-weight: bold; border-bottom: solid 4px #003b71;">
                                {{selected_detail.status}}</p>
                        </div>

                        <div (mouseenter)="setHover('2')" [ngClass]="{'blue-hover':hover==='2'}">
                            <p *ngIf="selected_detail.type != 'Indemnizacion'">Base Amount: {{selected_detail.notes}}</p>
                            <p *ngIf="selected_detail.type == 'Indemnizacion'">Sobre: {{selected_detail.notes}}</p>
                        </div>

                        <div *ngIf="selected_detail.type != 'Indemnizacion' && termination.motive != 'Restructuracion'"
                            (mouseenter)="setHover('3')" [ngClass]="{'blue-hover':hover==='3'}">
                            <p *ngIf="selected_detail.type == 'Aguinaldo'">Additional Adjustment: {{cred_benefits[1].notes}}</p>
                            <p *ngIf="selected_detail.type == 'Bono 14'">Additional Adjustment: {{cred_benefits[3].notes}}</p>
                            <p *ngIf="selected_detail.type == 'Vacaciones'">Additional Adjustment: {{cred_benefits[5].notes}}</p>
                        </div>

                        <div *ngIf="selected_detail.type != 'Indemnizacion' && termination.motive == 'Restructuracion'"
                            (mouseenter)="setHover('4')" [ngClass]="{'blue-hover':hover==='4'}">
                            <p *ngIf="selected_detail.type == 'Aguinaldo'">Additional Adjustment: {{cred_benefits[2].notes}}</p>
                            <p *ngIf="selected_detail.type == 'Bono 14'">Additional Adjustment: {{cred_benefits[4].notes}}</p>
                            <p colspan="2" *ngIf="selected_detail.type == 'Vacaciones'">Additional Adjustment: {{cred_benefits[6].notes}}</p>
                        </div>

                        <div class="d-flex justify-content-between">
                            <div>
                                <p>TOTAL TO BE PAID:</p>
                            </div>
                            <div>
                                <p style="text-align: right;">Q.{{selected_detail.amount | number: '3.1-2' }}</p>
                            </div>
                        </div>
                        <div class="modal-footer d-flex justify-content-right mt-2">
                            <button type="button" class="btn btn-outline-secondary" data-dismiss="modal">CLOSE</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!----------------------------------------------------------------------------------------------DEDUCTION DETAIL MODAL--------------------------------------------------------------->
<div class="modal fade" id="deduction_view" tabindex="-1" role="dialog" aria-labelledby="calc_detail"
    aria-hidden="true">
    <div class="modal-dialog  modal-lg modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="search_modalLabel"
                    style="font-weight:bold; text-align: center; font-size: 18px;">Dedution Details</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" style="padding:5px">
                <div class="col-md-12" >
                    <div class="row col-md-12" style="padding-right:0px">
                        <div class="col-md-5" style="padding-right:0px">
                            <label>Concept:</label>
                            <select [disabled]='record && !editDeduction' class="form-control" [(ngModel)]="activeCred.type" (change)="setActiveCredType($event.target.value)">
                                <option *ngFor="let ded of deductionsType">{{ded}}</option>
                            </select>
                        </div>
                        <div class="col-md-2" style="padding-right:0px"></div>
                        <div class="col-md-5" style="padding-right:0px">
                            <label>Amount:</label>
                            <input type="text" [disabled]='record && !editDeduction' class="form-control" [(ngModel)]="activeCred.amount">
                        </div>
                    </div>
                    <div class="row col-md-12" style="padding-right:0px">
                        <div class="col-md-12" style="padding-right:0px">
                            <label>Notes:</label>
                            <textarea class="form-control" width="100%" [disabled]='record' [(ngModel)]="activeCred.notes"></textarea>
                        </div>
                    </div>
                    <div class="row col-md-12" style="padding-right:0px">
                        <div class="col-md-4" style="padding-right:0px">
                            <label>User:</label>
                            <input type="text" disabled="true" class="form-control" [(ngModel)]="activeCred.id_user">
                        </div>
                        <div class="col-md-4" style="padding-right:0px"></div>
                        <div class="col-md-4" style="padding-right:0px">
                            <label>Date:</label>
                            <input type="text" disabled="true" class="form-control" [(ngModel)]="activeCred.date">
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer" style="margin-top:25px">
                <div class="col-md-3" *ngIf="!record">
                    <button class="form-control btn-outline-secondary" data-dismiss="modal">Cancel</button>
                </div>
                <div class="col-md-6" *ngIf="!record"></div>
                <div class="col-md-3" *ngIf="!record">
                    <button class="form-control btn-outline-primary" (click)="insertDeduction()" data-dismiss="modal">Accept</button>
                </div>
                <div class="col-md-1" *ngIf="record"></div>
                <div class="col-md-2" *ngIf="record">
                    <button class="form-control btn-outline-secondary" data-dismiss="modal">Close</button>
                </div>
                <div class="col-md-2" *ngIf="record"></div>
                <div class="col-md-2" *ngIf="record && !editDeduction">
                    <button class="form-control btn-outline-warning" data-dismiss="modal" (click)="deleteDeduction()">Delete</button>
                </div>
                <div class="col-md-2" *ngIf="record"></div>
                <div class="col-md-2" *ngIf="record">
                    <button class="form-control btn-outline-primary" *ngIf="!editDeduction" (click)="setEdit()">Edit</button>
                    <button class="form-control btn-outline-primary" *ngIf="editDeduction" (click)="updateDeduction()" data-dismiss="modal">Save</button>
                </div>
                <div class="col-md-1" *ngIf="record"></div>
            </div>
        </div>
    </div>
</div>

<!----------------------------------------------------------------------------------------------ADD PAYMET MODAL--------------------------------------------------------------->
<div class="modal fade" id="addPayment" tabindex="-1" role="dialog" aria-labelledby="calc_detail"
    aria-hidden="true">
    <div class="modal-dialog  modal-lg modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="search_modalLabel"
                    style="font-weight:bold; text-align: center; font-size: 18px;">Insert Payment</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" style="padding:5px">
                <div class="col-md-12">
                    <div class="row">
                        <div class="col-md-4">
                            <label>Payment Method:</label>
                            <select class="form-control" [(ngModel)]="activeNewPayment.id_paymentmethod">
                                <option *ngFor="let pm of paymentMethods" value="{{pm.idpayment_methods}}">{{pm.type}} - {{pm.bank}}</option>
                            </select>
                        </div>
                        <div class="col-md-4"></div>
                        <div class="col-md-4">
                            <label>Account:</label>
                            <select class="form-control" [(ngModel)]="activeNewPayment.id_account_py">
                                <option *ngFor="let acc of allAccounts" value='{{acc.idaccounts}}'>{{acc.name}}</option>
                            </select>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-1"></div>
                        <div class="col-md-10">
                            <label>Period:</label>
                            <select class="form-control" [(ngModel)]="activeNewPayment.id_period">
                                <option *ngFor="let period of allPeriods" value="{{period.idperiods}}">{{period.start}} TO {{period.end}}</option>
                            </select>
                        </div>
                        <div class="col-md-1"></div>
                    </div>
                </div>
            </div>
            <div class="modal-footer" style="margin-top:25px">
                <div class="d-flex col-md-12">
                    <div class="col-md-4">
                        <button class="form-control btn-outline-primary" (click)="createPayment()" data-dismiss="modal">Create</button>
                    </div>
                    <div class="col-md-4"></div>
                    <div class="col-md-4">
                        <button class="form-control btn-outline-secondary" data-dismiss="modal">Cancel</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!----------------------------------------------------------------------------------------------DELETE PAYMET MODAL--------------------------------------------------------------->
<div class="modal fade" id="deletePayment" tabindex="-1" role="dialog" aria-labelledby="calc_detail"
    aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="search_modalLabel"
                    style="font-weight:bold; text-align: center; font-size: 18px;">Insert Payment</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" style="padding:5px">
                <div class="col-md-12" >
                    <label>Delete this record will also delete all associated credits and debits, are you sure you want to proceede?</label>
                </div>
            </div>
            <div class="modal-footer" style="margin-top:25px">
                <div class="d-flex col-md-12">
                    <div class="col-md-4">
                        <button class="form-control btn-outline-secondary" data-dismiss="modal">Cancel</button>
                    </div>
                    <div class="col-md-4"></div>
                    <div class="col-md-4">
                        <button class="form-control btn-outline-primary" (click)="deletePayment()" data-dismiss="modal">Accept</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!---------------------------------------------------------------------------------------------- SERVICE MODAL--------------------------------------------------------------->
<div class="modal fade" id="servicesView" tabindex="-1" role="dialog" aria-labelledby="servicesViewV"
    aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="search_modalLabel"
                    style="font-weight:bold; text-align: center; font-size: 18px;">SERVICE</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" style="padding:5px">
                <div class="row col-md-12">
                    <div class="form-group col-md-9">
                        <label>NAME:</label>
                        <select class="form-control" [(ngModel)]="newService.name">
                            <option>RAF</option>
                            <option>Advance</option>
                            <option>Advance Debit</option>
                            <option>Monthly Bus</option>
                            <option>Car Parking</option>
                            <option>Motorcycle Parking</option>
                            <option>CLIENT BONUS</option>
                            <option>CLIENT BONUS</option>
                        </select>
                    </div>
                    <div class="col-md-3">
                        <label>TYPE:</label>
                        <select class="form-control" [(ngModel)]="newService.type" [disabled]="recorded_service">
                            <option [value]="0">DEBIT</option>
                            <option [value]="1">CREDIT</option>
                        </select>
                    </div>
                </div>
                <div class="row col-md-12">
                    <div class="col-md-2" *ngIf="recorded_service"></div>
                    <div class="col-md-2">
                        <label>AMOUNT:</label>
                        <input class="form-control" type="number" [(ngModel)]="newService.amount">
                    </div>
                    <div class="col-md-3">
                        <label>MAX:</label>
                        <input class="form-control" type="number" [(ngModel)]="newService.max">
                    </div>
                    <div class="col-md-3">
                        <label>FRECUENCY:</label>
                        <select class="form-control" *ngIf="(newService.frecuency == 'MONTHLY' ||
                        newService.frecuency == 'BIWEEKLY' ||
                        newService.frecuency == 'UNIQUE' || !isDate(newService.frecuency)) && newService.frecuency != 'ANTICIPATED'" [(ngModel)]="newService.frecuency">
                            <option>MONTHLY</option>
                            <option>BIWEEKLY</option>
                            <option>UNIQUE</option>
                            <option>ANTICIPATED</option>
                        </select>
                        <input type="date" *ngIf="(newService.frecuency != 'MONTHLY' &&
                        newService.frecuency != 'BIWEEKLY' &&
                        newService.frecuency != 'UNIQUE') && (isDate(newService.frecuency) || newService.frecuency == 'ANTICIPATED')" class="form-control" [(ngModel)]="newService.frecuency">
                    </div>
                    <div class="col-md-4" *ngIf="!recorded_service">
                        <label>REOCCURANCE (days):</label>
                        <select class="form-control" [(ngModel)]="repeateService" *ngIf="repeateService == 'DISABLE'">
                            <option>DISABLE</option>
                            <option>ENABLE</option>
                        </select>
                        <input type="number" class="form-control" *ngIf="repeateService != 'DISABLE'" [(ngModel)]="repeateService">
                    </div>
                    <div class="col-md-2" *ngIf="!recorded_service && repeateService != 'DISABLE'">
                        <label>TIMES:</label>
                        <input type="number" class="form-control" [(ngModel)]="serviceTimes">
                    </div>
                    <div class="col-md-2" *ngIf="recorded_service"></div>
                </div>
                <div class="row col-md-12">
                    <div class="form-group col-md-12">
                        <label>Notes:</label>
                        <textarea class="form-control" width="100%" [(ngModel)]="newService.notes"
                            #message='ngModel'></textarea>
                    </div>
                </div>
                <div class="row col-md-12">
                    <div class="form-group col-md-4">
                        <label>DATE:</label>
                        <input type="text" class="form-control" [(ngModel)]="newService.date" [disabled]="true">
                    </div>
                    <div class="form-group col-md-4">
                        <label>CURRENT:</label>
                        <input type="text" class="form-control" [(ngModel)]="newService.current">
                    </div>
                    <div class="form-group col-md-4">
                        <label>STATUS:</label>
                        <select [(ngModel)]="newService.status" class="form-control" [disabled]="!recorded_service">
                            <option [value]="0">INACTIVE</option>
                            <option [value]="1">ACTIVE</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="modal-footer" style="margin-top:25px">
                <div class="d-flex col-md-12">
                    <div class="col-md-4">
                        <button class="form-control btn-outline-secondary" data-dismiss="modal" (click)="start()">Cancel</button>
                    </div>
                    <div class="col-md-4"></div>
                    <div class="col-md-4">
                        <button class="form-control btn-outline-primary" data-dismiss="modal" *ngIf="!recorded_service" (click)="insertService()">Accept</button>
                        <button class="form-control btn-outline-primary" data-dismiss="modal" *ngIf="recorded_service" (click)="saveService()">Save</button>
                        <button hidden="true" data-target="#alertModal"
                        data-toggle="modal" id="openAlertModal"></button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!---------------------------------------------------------------------------------------------- ALERT MODAL--------------------------------------------------------------->
<div class="modal fade" id="alertModal" tabindex="-1" role="dialog" aria-labelledby="alertModal"
    aria-hidden="true" #alertModal>
    <div class="modal-dialog modal-dialog-centered modal-sm" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="search_modalLabel"
                    style="font-weight:bold; text-align: center; font-size: 18px; text-align: center;">{{alertMod.header}}</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" style="padding:5px">
                <div class="row col-md-12">
                    <label style="text-align: center">{{alertMod.content}}</label>
                </div>
            </div>
            <div class="modal-footer" style="margin-top:25px">
                <div class="d-flex col-md-12">
                    <div class="col-md-4">
                        <button class="form-control btn-outline-secondary" data-dismiss="modal" *ngIf="alertMod.type == 0" (mouseup)="start()">Cancel</button>
                    </div>
                    <div class="col-md-6">
                        <button class="form-control btn-outline-primary" data-dismiss="modal" *ngIf="alertMod.type == 1" (mouseup)="start()">Close</button>
                    </div>
                    <div class="col-md-4">
                        <button class="form-control btn-outline-primary" data-dismiss="modal" *ngIf="alertMod.type == 0">Accept</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
